<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>瀑布流</title>
    <style>
      #main{
         column-count:6;
      }
        .box{
            padding: 15px 0 0 15px;
        }
        .pic{
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        .box img{
            width:165px;
        }
    </style>
    <script>
            window.onload = function() {
                var josn = {"data": [{"src": "3.jpg"}, {"src": "4.jpg"}, {"src": "5.jpg"}, {"src": "6.jpg"}, {"src": "7.jpg"}, {"src": "8.jpg"}]};

                window.onscroll = function () {
                    var box = getClass("main", "box");
                    var main = document.getElementById("main");
                    if (checkScroll(box)) {
                        for (var i = 0; i < josn.data.length; i++) {
                            var obj = document.createElement("div");
                            obj.className = "box";
                            var pic = document.createElement("div");
                            pic.className = "pic";
                            var img = document.createElement("img");
                            img.src = josn.data[i].src;
                            pic.appendChild(img);
                            obj.appendChild(pic);
                            main.appendChild(obj);
                        }
                    }
                }
            };
            function checkScroll(obj) {
                var bottom = obj[obj.length - 1].offsetTop - parseInt(obj[obj.length - 1].offsetHeight / 2);
                var scroll = document.documentElement.scrollTop || document.body.scrollTop;
                var pageHeight = document.documentElement.clientHeight || document.body.clientHeight;
                return (scroll + pageHeight) > bottom;
            }
            function getClass(parent, clsName) {
                var oParent = parent ? document.getElementById(parent) : document;
                var children = oParent.getElementsByTagName("*");
                var s = [];
                for (var i = 0; i < children.length; i++) {
                    if (children[i].className.match(clsName)) {
                        s.push(children[i]);
                    }
                }
                return s;
            }
    </script>
</head>
<body>
<div id="main">
    <div class="box">
        <div class="pic">
            <img src="1.png"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="2.png"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="3.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="4.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="5.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="6.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="7.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="8.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="1.png"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="2.png"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="3.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="4.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="5.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="6.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="7.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="8.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="1.png"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="2.png"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="3.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="4.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="5.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="6.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="7.jpg"/>
        </div>
    </div>
    <div class="box">
        <div class="pic">
            <img src="8.jpg"/>
        </div>
    </div>
</div>
</body>
</html>